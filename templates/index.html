<!DOCTYPE html>
<html>
<head>
    <title>프로젝트: SV Deck Profiler</title>
    <style>
        body { font-family: sans-serif; }
        table { border-collapse: collapse; width: 95%; margin-top: 20px; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
        th.sortable { background-color: #f2f2f2; cursor: pointer; position: relative; }
        th.sortable:hover { background-color: #e2e2e2; }
        th.sortable::after { content: ''; position: absolute; right: 8px; top: 50%; margin-top: -7px; border-width: 5px; border-style: solid; border-color: transparent; opacity: 0.3; }
        th.sort-asc::after { border-bottom-color: black; opacity: 1; }
        th.sort-desc::after { border-top-color: black; opacity: 1; }
        .controls { margin-bottom: 10px; display: flex; align-items: center; flex-wrap: wrap; }
        .control-group { margin-right: 20px; margin-bottom: 10px; }
        .adjust-btn { margin: 0 5px; cursor: pointer; width: 25px; }
        td:nth-child(4) { text-align: center; } /* Center the custom count column */
        #deck-total { font-weight: bold; }
        .count-increased { background-color: #e6ffed !important; } /* light green */
        .count-decreased { background-color: #ffe6e6 !important; } /* light red */
        #copy-feedback { margin-left: 10px; color: green; font-weight: bold; visibility: hidden; }
    </style>
</head>
<body>
    <h1>프로젝트: SV Deck Profiler (실시간 분석 결과)</h1>

    <div class="controls">
        <div class="control-group">
            <label for="post_select_elm">포스트 선택:</label>
            <select id="post_select_elm">
                {% for post in posts %}
                <option value="{{ post.url }}" {% if post.url == selected_post_url %}selected{% endif %}>{{ post.title }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="control-group">
            <label for="deckname_select_elm">덱 선택:</label>
            <select id="deckname_select_elm">
                {% for deck_name in deck_names %}
                <option value="{{ deck_name }}" {% if deck_name == selected_deck %}selected{% endif %}>{{ deck_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="control-group">
            <button id="copy-deck-button">덱 구성 복사</button>
            <span id="copy-feedback">복사 완료!</span>
        </div>
        <div class="control-group">
            <span id="deck-total"></span>
        </div>
    </div>

    <table id="card_analysis_table">
        <thead>
            <tr>
                <th class="sortable" data-sort="name">카드 이름</th>
                <th class="sortable" data-sort="average">평균 채용률</th>
                <th class="sortable" data-sort="original_adjusted_count">최초 추천</th>
                <th class="sortable" data-sort="adjusted_count">커스텀 채용 수</th>
                <th class="sortable" data-sort="removability_score">제거 우선도</th>
                <th class="sortable" data-sort="addability_score">추가 우선도</th>
            </tr>
        </thead>
        <tbody>
            <!-- JS에 의해 동적으로 채워짐 -->
        </tbody>
    </table>

    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>